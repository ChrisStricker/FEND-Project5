<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=11" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Neighborhood Map</title>
		<script src="js/knockout.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBN6fQCYN1L14ie8uTENpNZCCe9BPxPRbc&callback=initMap" async defer></script>
		<script>
			var SITES = [
				{name:"Gateway Arch", lat:38.624674, lng:-90.184941},
				{name:"Busch Stadium", lat:38.622644, lng:-90.192812},
				{name:"Missouri Botanical Garden", lat:38.612008, lng:-90.260196},
				{name:"St. Louis Zoo", lat:38.63578, lng:-90.288734},
				{name:"Fabulous Fox Theater", lat:38.639003, lng:-90.232133}
			];
			
			var map;

			function initMap() {
				map = new google.maps.Map(document.getElementById('map'), {center: {lat :38.6272222, lng:-90.1977778},	zoom:12});
			
				var j = SITES.length
				for (i=0; i<j; i++) {
					new google.maps.Marker({ position: { lat: SITES[i].lat, lng: SITES[i].lng},	map: map });
				}
			}

			var model = function() {
				var self = this;

				self.locations = ko.observableArray( 
					ko.utils.arrayMap(SITES, function(location) {
						return ko.observable(location);
				}));
			}

			window.onload = function() {
				ko.applyBindings(new model());
			}
		</script>
	</head>
	<body>
		<div style="width:20%;">
			<h2>Locations</h2>
			<ul data-bind="foreach: locations">
				<li>
					<span data-bind="text: name"></span>
				</li>
			</ul>
		</div>
		<div id=map style="height:500px; width: 75%; float:right;"></div>
	</body>
</html>
